<h1>Crews</h1>
<kendo-grid
  [data]="gridView"
  [sortable]="{ allowUnsort: true, mode: 'single' }"
  [filterable]="true"
  [columnMenu]="{filter: false, sort: true}"
  [filter]="state.filter"
  [sort]="state.sort"
  (add)="addCrew()"
  (edit)="editCrew($event)"
  (remove)="deleteCrewGrid($event)"
  (dataStateChange)="dataStateChange($event)"
>
  <ng-template kendoGridToolbarTemplate>
    <button kendoGridAddCommand>Add New Crew</button>
  </ng-template>

  <kendo-grid-column field="id" title="Id" [hidden]="true"></kendo-grid-column>

  <kendo-grid-column field="name" title="Name"></kendo-grid-column>

  <kendo-grid-column field="ship" title="Ship Name"></kendo-grid-column>

  <kendo-grid-column field="numberOfMember" title="Members" format="n0" filter="numeric">
    <ng-template kendoGridCellTemplate let-dataItem>
      <div class="crewGridMemberCell">
        {{dataItem.numberOfMember}}
        <button kendoButton routerLink="/members" (click)="viewMembersGrid(dataItem)">View Members</button>
      </div>
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-column field="memberMax" title="Max Members" format="n0" filter="numeric">
    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
      <div>{{dataItem.memberMax}} members</div>
    </ng-template>
  </kendo-grid-column>

  <kendo-grid-command-column [columnMenu]="false">
    <ng-template kendoGridCellTemplate>
      <button kendoGridEditCommand [primary]="true">Edit</button>
      <button kendoGridRemoveCommand>Delete</button>
    </ng-template>
  </kendo-grid-command-column>
</kendo-grid>

<app-crew-form
  [crews]="crews"
  [crew]="selectedCrew"
  [isNewCrew]="isNewCrew"
  (saveFormEvent)="saveCrew($event)"
  (closeFormEvent)="closeForm()"
>
</app-crew-form>

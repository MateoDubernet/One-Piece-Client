<h1>Crews</h1>
<!-- affiche la liste des Ã©quipages -->
<kendo-grid 
[data]="gridView"
[sortable]="true"
[filterable]="true"
[columnMenu]="{filter: false, sort: true}"

[filter]="filter"
[sort]="sort"
(sortChange)="sortChange($event)"
(filterChange)="filterChange($event)"

(add)="addCrewGrid()"
(remove)="deleteCrewGrid($event)"
(edit)="editCrewGrid($event)"
(dataStateChange)="dataStateChange($event)">
<ng-template kendoGridToolbarTemplate>
    <button kendoGridAddCommand>Add New Crew</button>
</ng-template>
    <kendo-grid-column field="id" title="ID"></kendo-grid-column>
    <kendo-grid-column field="name" title="Name"></kendo-grid-column>
    <kendo-grid-column field="ship" title="Ship Name"></kendo-grid-column>
    <kendo-grid-column field="members" title="Members">
        <ng-template kendoGridCellTemplate let-dataItem>
            <div class="crewGridMemberCell">
                {{dataItem.members?.length}}
                <button kendoButton (click)="goTo('members')" (click)="viewMembersGrid(dataItem)">
                    <a >View Member</a>
                </button>
            </div>
            
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-column field="memberMax" title="Max Members">
        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            <div>{{dataItem.memberMax}} members</div>
        </ng-template>
    </kendo-grid-column>
    <kendo-grid-command-column [columnMenu]="false">
        <ng-template kendoGridCellTemplate>
            <button kendoGridEditCommand [primary]="true">Edit</button>
            <button kendoGridRemoveCommand>Delete</button>
        </ng-template>
    </kendo-grid-command-column>
</kendo-grid>

<app-crew-form
[crew]="crew"
[newCrew]="newCrew"

(edit)="editCrew($event)"
(add)="addCrew($event)"
(close)="closeForm()">
</app-crew-form>